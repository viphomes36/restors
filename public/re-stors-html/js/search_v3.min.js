var bhHead=new boxHeight,bhRight=(bhHead.add(".pr-b-top_baner").add("#prian-header"),scrollSearchTop=bhHead.getHeight(),new boxHeight),bhBottom=(bhRight.add(".pr-js-search").add(".pr-b-right-adv-init").add(".sidebar-right__content").add(".sidebar-right__top-sponsor"),new boxHeight),especial_top=(bhBottom.add(".b-news__footer").add("footer").add(".b-form_subscribe").add(".info-text"),0),especial_right=0,especial_bottom=0,stick_block_name=".pr-js-search",stick_flag_name="sticky";function setStickyOffset(e){1219<$(window).width()&&("right_banner"===e?especial_right=bhRight.getHeight(!0):especial_top=bhHead.getHeight(!0)),"undefined"!=typeof stickyBlock&&stickyBlock.length?scrollSearchTop=stickyBlock.offset().top:0<$(".pr-js-search").length&&(scrollSearchTop=$(".pr-js-search").offset().top),"function"==typeof glueyProposal&&glueyProposal()}$().ready(function(){especial_top=bhHead.getHeight(!0),especial_right=bhRight.getHeight(!0),especial_bottom=bhBottom.getHeight(!0)});var SearchForm=function(t){var p=this,o="//"+document.domain;p.autocomplete=!0,p.typeahead_handl=null,p.typeahead_enter=null,p.ismap=!1,this.jump_point=0,this.canonical_url,this.all_blocks=["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","specifications-block","side-block","square-block","room-block","floor-block","side-block","room-block","floor-block","building-block","condition-block","credit-block","additional-block","site_assignments-block","condition-block","additional-block","yield-block","equity-block","land-block","square_land-block2","yield-single-block","commercial-block"],this.filtersChecked={},this._filtersChecked=0,this._allFiltersChecked=0,this.common_elements={mobile:{3:["object-block","price-block"]},tablet:{vertical:{3:["price-block"]}}},this.clean_common_elements={mobile:{3:["object-block","geo-block","price-block"]},tablet:{vertical:{3:["object-block","geo-block","price-block"]}}},this.all_commercial_filter_elements=["yield-single-block","commercial-block","yield-block","commercial-filter-block"],this.clean_commercial_filter_elements={mobile:{1:[],2:["yield-single-block","commercial-block"]},tablet:{horizontal:{1:["yield-single-block","commercial-filter-block"],2:["yield-single-block","commercial-block"]},vertical:{1:["yield-single-block"],2:["yield-single-block","commercial-block"]}},desktop:{1:["yield-block","commercial-filter-block"],2:["yield-block","commercial-filter-block"]}},this.all_elements=["object-block","geo-block","price-block","commercial-block","yield-single-block"],this.setBounds=function(e){!0===e?(p.autoCompleteDisable(!0),p.inputDisable(!0)):($("#maphash").val(""),p.autoCompleteDisable(!1),p.inputDisable(!1))},this.cleanHidden=function(){$('input[name="acountry[1]"]').val(0),$('input[name="aregion[1]"]').val(0),$('input[name="adistrict[1]"]').val(0),$('input[name="aarea[1]"]').val(0),p.setBounds(!1)},this.autoCompleteDisable=function(e){var i=p._form.find(".auto-search");p.autoCompleteDisabled(e,i)},this.inputDisable=function(e){p._form.find(".auto-search").prop("disabled",e)},this.autoCompleteDisabled=function(e,i){!0===e?i.typeahead("disable"):i.typeahead("enable")},this.autoComplete=function(e){e.keydown(function(e){13===e.which&&!0===p.typeahead_enter?(p.typeahead_enter=!1,p.getCount(1)):13===e.which&&!1===p.typeahead_enter||(p.typeahead_enter=!0)});var i=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{wildcard:"%QUERY",url:"//"+document.domain+"/sys/regions.php?term=%QUERY&type=8&lng="+site_lng}});e.typeahead({hint:!1,highlight:!1,minLength:1},{display:"value",source:i,limit:30,templates:{suggestion:function(e){return"<div>"+e.label+"</div>"}}}).on("typeahead:select",function(e,i){p.cleanHidden(),void 0!==i.country_id&&$('input[name="acountry[1]"]').val(i.country_id),void 0!==i.region_id&&$('input[name="aregion[1]"]').val(i.region_id),void 0!==i.district_id&&$('input[name="adistrict[1]"]').val(i.district_id),void 0!==i.area_id&&$('input[name="aarea[1]"]').val(i.area_id),void 0!==i.value&&$('input[name="where[1]"]').val(i.value),0<main_page||$(window).width()<=767&&!$("body").hasClass("body__open-search-mobile")&&p.getCount(1),$(".search-save-form").hide(),p.typeahead_enter=!0,$("#maphash").val("")}).on("typeahead:close",function(e){p.getCount(),p.checkFilter(),p.checkFilledForm(),$(".search-save-form").hide()}).on("typeahead:cursorchange",function(e){p.typeahead_enter=!1}).on("typeahead:change",function(e){}),p.autoCompleteDisabled(!1,p._form.find(".auto-search"))},this.substringMatcher=function(o){return function(e,i){var t=[];substrRegex=new RegExp(e,"i"),$.each(o,function(e,i){substrRegex.test(i)&&t.push({label:i})}),i(t)}},this.setSearch=function(){0<p._filtersChecked?p._form.find(".sel").text(p._filtersChecked).removeClass("hide"):p._form.find(".sel").text(p._filtersChecked).addClass("hide")},this.getCount=function(t){var e;!0!==p.stripped&&(e=p._form.serialize(),$.ajax({type:"POST",url:"//"+document.domain+"/sys/search_count_v2.php",data:"lng="+site_lng+"&"+e+"&map="+p.ismap,dataType:"json",success:function(e){var i;e?(i="",p.canonical_url=null,"object"==typeof e&&("string"==typeof e.found_text&&(i=e.found_text),"string"==typeof e.canonical_url&&0<e.canonical_url.length&&(p.canonical_url=e.canonical_url)),!(768<=$(window).width()&&$(window).width()<=1219)||$(".pr-js-search").hasClass("search-green")?p._searchBtn.find('[data-ltype="title"]').html(i):p._searchBtn.find('[data-ltype="title"]').html(p._searchBtn.attr("data-title"))):p._searchBtn.find('[data-ltype="title"]').html(""),1===t?p.sendForm():3===t&&p.sendForm(t)}}))},this.cleanFilterBlock=function(i){p._form.find("."+i).find("input:text").each(function(){$(this).val("")}),p._form.find("."+i).find("input:checkbox").each(function(){$(this).prop("checked",!1)}),p._form.find("."+i).find("input:radio").each(function(){"search_currency"!==$(this).attr("name")&&"square_land_unit"!==$(this).attr("name")&&"square_land_unit2"!==$(this).attr("name")&&$(this).prop("checked",!1)}),p._form.find("."+i).hasClass("dropdown")&&(p._form.find("."+i).hasClass("square_land-block")?p.changeSquarelandTitle(p._form.find("."+i)):p._form.find("."+i).hasClass("price-block")?p.changePriceTitle(p._form.find("."+i)):p.blockTitleNames({attr:function(e){return i}}))},this.buildBlocks=function(e){var t=0<p._form.find('input[name="type[]"]:checked').val()?p._form.find('input[name="type[]"]:checked').val():1,o=(0<p._form.find('input[name="parent"]:radio').length?p._form.find('input[name="parent"]:checked'):p._form.find('input[name="parent"]:hidden')).val(),n={1:{100:{15:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","building-block","condition-block","specifications-block","side-block","credit-block","additional-block"],31:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","building-block","condition-block","specifications-block","side-block","credit-block","additional-block","land-block"]},17:["square_land-block2","site_assignments-block","specifications-block","side-block","credit-block","additional-block"],16:["yield-block","equity-block","square-block","building-block","condition-block","side-block","credit-block","additional-block","yield-single-block","commercial-block"],undefined:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","building-block","condition-block","specifications-block","side-block","credit-block","additional-block"]},2:{100:{15:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","specifications-block","side-block"],31:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","specifications-block","side-block"]},16:["square-block","side-block"],undefined:["square-block","room-block","bathrooms_number-block","bedroom-block","floor-block","specifications-block","side-block"]}},a={"specifications-block":{1:{100:{15:["furniture","balcony","pool","guarded","secureparking","shop"],31:["furniture","balcony","pool","guarded","secureparking","shop"]},17:["reservoir","plot_building","electricity","water"],16:[],undefined:["furniture","balcony","pool","guarded","secureparking"]},2:{100:{15:["furniture","balcony","pool","airconditioning","internet","washer","dishwasher","shop","guarded","secureparking"],31:["furniture","balcony","pool","airconditioning","internet","washer","dishwasher","shop","guarded","secureparking"]},17:["reservoir","plot_building","electricity","water"],16:[],undefined:["furniture","balcony","pool","guarded","secureparking"]},all:["furniture","balcony","pool","guarded","secureparking","airconditioning","internet","washer","dishwasher","shop","reservoir","plot_building","electricity","water","notlast","arendator"]},"floor-block":{1:{100:{15:["notlast"],31:[]}},2:{100:{15:["notlast"],31:[]}},all:["notlast"]},"additional-block":{1:{100:{15:["object_for_rent"],31:["object_for_rent"]},16:["tenant"]},all:["tenant","object_for_rent"]}};for(selector in a)if(void 0!==a[selector]&&void 0!==a[selector][t]){var l=a[selector].all,r=[];if("100"===o)if(p._form.find('[name="pobjects[]"]:checked').length)p._form.find('[name="pobjects[]"]:checked').each(function(){var e=$(this).val();void 0!==a[selector][t][o]&&(r=r.concat(r,a[selector][t][o][e]))});else for(key in a[selector][t][o])void 0!==a[selector][t][o][key]&&(s=r,d=a[selector][t][o][key],r=0==r.length?d:$.map(s,function(e){return $.inArray(e,d)<0?null:e}));else if(void 0===o)for(key in a[selector][t][100])void 0!==a[selector][t][100][key]&&(s=r,d=a[selector][t][100][key],r=0==r.length?d:$.map(s,function(e){return $.inArray(e,d)<0?null:e}));else r=a[selector][t][o];if(void 0!==l)for(i=0;i<l.length;i++)p._form.find("."+selector+' input[type="checkbox"][name="'+l[i]+'"]').closest(".checkbox").hide();if(void 0!==r)for(i=0;i<r.length;i++)p._form.find("."+selector+' input[type="checkbox"][name="'+r[i]+'"]').closest(".checkbox").show()}var c=[];if("100"===o)if(p._form.find('[name="pobjects[]"]:checked').length)p._form.find('[name="pobjects[]"]:checked').each(function(){var e=$(this).val();c=c.concat(c,n[t][o][e])});else for(key in n[t][o])var s=c,d=n[t][o][key],c=0==c.length?d:$.map(s,function(e){return $.inArray(e,d)<0?null:e});else if(void 0===o)for(key in n[t][100]){s=c,d=n[t][100][key];c=0==c.length?d:$.map(s,function(e){return $.inArray(e,d)<0?null:e})}else c=n[t][o];var h=$(p.all_blocks).not(c).get();for(i=0;i<h.length;i++)p._form.find("."+h[i]).hide(),p.cleanFilterBlock(h[i]);if(void 0!==c)for(i=0;i<c.length;i++)p._form.find("."+c[i]).css("display","").removeAttr("style");p.setCommercialFilterBlock(t);var f=p._form.find('[name="pobjects[]"][value="15"]'),m=p._form.find('[name="pobjects[]"][value="31"]');m.is(":checked")&&!f.is(":checked")||void 0===o||!m.is(":checked")&&!f.is(":checked")?p._form.find('.room-block .b-radio input[value="100"]').closest("label").hide():p._form.find('.room-block .b-radio input[value="100"]').closest("label").show(),f.is(":checked")&&!m.is(":checked")?$(".floor-block .title").text($(".floor-block .title").attr("data-title15")):$(".floor-block .title").text($(".floor-block .title").attr("data-title31"))},this.resetObject=function(e){p._form.find(".object-block .dropdown-menu").each(function(e){1===e?$(this).addClass("in"):$(this).removeClass("in")})},this.filterLogic=function(e){var i=e.attr("data-parent");"operation-block"===i&&(p.selectSale(e),p.changePriceTitle(),p._form.find('.object-block input[name="parent"][value="17"]').is(":checked")&&(p.cleanFilterBlock("object-block"),p.resetObject()),p.cleanFilterBlock("price-block"),p.changePriceTitle({attr:function(e){return"price-block"}}),p.buildBlocks(e)),"object-block"===i&&(p.selectProperty(e),p.buildBlocks(e)),"plot"!==e.attr("name")||e.is(":checked")||p.cleanFilterBlock("square_land-block")},this.clearAllCheckboxes=function(e){e.each(function(){$(this).prop("checked",!1)})},this.selectPrice=function(e){p.changePriceTitle(e)},this.getExtBlock=function(e){var i=[];return 920<$(window).width()&&$(window).width()<=1220||(767<$(window).width()&&$(window).width()<=920?(1===main_page||4===main_page||isNaN(main_page)&&!$(".pr-js-search").hasClass("search-green"))&&(i=(2===e?p.clean_common_elements:p.common_elements).tablet.vertical[3]):$(window).width()<=767&&1!==main_page&&isNaN(main_page)&&(i=(2===e?p.clean_common_elements:p.common_elements).mobile[3])),i},this.setCommercialFilterBlock=function(e){var t=[];if(0<p._form.find(".commercial-block").length){var o=p.all_commercial_filter_elements,t=2==e?o:920<$(window).width()&&$(window).width()<=1220?5===main_page?p.clean_commercial_filter_elements.tablet.horizontal[1]:p.clean_commercial_filter_elements.tablet.horizontal[2]:767<$(window).width()&&$(window).width()<=920?5===main_page?p.clean_commercial_filter_elements.tablet.vertical[1]:p.clean_commercial_filter_elements.tablet.vertical[2]:$(window).width()<=767?5===main_page?p.clean_commercial_filter_elements.mobile[1]:p.clean_commercial_filter_elements.mobile[2]:5===main_page?p.clean_commercial_filter_elements.desktop[1]:p.clean_commercial_filter_elements.desktop[2],n=$(o).not(t).get();for(p._form.find(".commercial-filter-block input").removeClass("no_check_counter"),p._form.find(".yield-block input").removeClass("no_check_counter"),i=0;i<n.length;i++)p._form.find("."+n[i]).css("display","").removeAttr("style"),"commercial-block"==n[i]&&p._form.find(".commercial-filter-block input").addClass("no_check_counter"),"yield-single-block"==n[i]&&p._form.find(".yield-block input").addClass("no_check_counter");if(t.length)for(i=0;i<t.length;i++)p._form.find("."+t[i]).hide()}return t},this.checkFilter=function(e){function t(e){var t=0;if(e.length)for(i=0;i<e.length;i++)"object-block"===e[i]?t+=a():p._form.find("."+e[i]).find("input:checked, input:text").each(function(){"square_land_unit"!==$(this).attr("name")&&"square_land_unit2"!==$(this).attr("name")&&"search_currency"!==$(this).attr("name")&&($(this).is(":checkbox")&&$(this).is(":checked")&&t++,$(this).is(":text")&&$(this).val().length&&t++,$(this).is(":radio")&&$(this).is(":checked")&&t++)});return t}var o=0,n=(p._form.find(".filters").find("input:checked, input:text").each(function(){$(this).hasClass("no_check_counter")||($(this).is(":checkbox")&&$(this).is(":checked")&&o++,$(this).is(":text")&&$(this).val().length&&o++)}),p.getExtBlock()),a=function(){var e=0,i=0;return p._form.find(".object-block").find("input:checked").each(function(){$(this).is(":checkbox")&&$(this).is(":checked")&&i++,$(this).is(":radio")&&$(this).is(":checked")&&e++}),0<i?i:e};o+=t(n),p._filtersChecked=o,p._allFiltersChecked=o+t(p.all_elements),0<main_page&&5!=main_page||p.checkFilledForm()},this.checkFilledForm=function(){!0!==p.stripped&&(0<p._allFiltersChecked?$(".search-clear-form").css("display","").removeAttr("style"):$(".search-clear-form").hide(),"function"==typeof glueyProposal&&glueyProposal())},this.blockTitleNames=function(e){var e=e.attr("data-parent"),e=p._form.find("."+e),i=e.find("a:first span:first").attr("data-def-title"),t="",o="";e.find(".dropdown-menu li").each(function(){var e,i=$(this).find("input:checked");i.length&&(e=$(this).find("input:checked").attr("data-ltitle"),"parent"===i.attr("name")?o=e:(i=$(this).find("input:checked").attr("data-text"),""!==t&&(t+=", ",i=i.toLowerCase()),t+=i))}),""===(t=$(window).width()<=920&&e.hasClass("be-extended")?e.find("a:first").attr("title"):t)?(t=""===o?i:o,e.find("a:first span:first").removeClass("selected")):e.find("a:first span:first").addClass("selected"),e.find("a:first span:first").html(t)},this.checkMobileSelect=function(){$(window).width()<=920?p._form.find(".form-group.dropdown").each(function(){$(this).removeAttr("closable");var e=$(this).find(".dropdown-menu input[type='checkbox']:checked").length;$(this).hasClass("square_land-block")&&$(this).removeClass("open"),e&&!$(this).hasClass("square_land-block")&&$(this).addClass("open")}):p._form.find(".form-group.dropdown").each(function(){$(this).removeClass("open")})},this.changePriceTitle=function(e){function i(e){var i="";return 1e9<=e?(e/=1e9,i=project_lang.billion):1e6<=e?(e/=1e6,i=project_lang.million):1e3<=e&&(e/=1e3,i=project_lang.thousand),Number(e.toFixed(1))+" "+i}var t,o="",n=p.clearNumericInput(p._form.find('input[name="minprice"]'),1),a=p.clearNumericInput(p._form.find('input[name="maxprice"]'),1),l=p._form.find(".price-block");0<n||0<a?(t=l.find(".b-radio input[type=radio]:checked").closest("label").find("span").text(),0<n&&(o+=i(n),a||(o+=" "+t+"+")),0<a&&(0<o.length&&(o+=" - "),n||(o+="0 - "),o+=i(a)+" "+t),l.find(".pricetype-block").is(":visible")&&l.find(".pricetype-block input:checked").length&&(o+=" "+l.find(".pricetype-block input:checked").attr("data-text"))):o=l.find('a span[data-ltype="title"]').attr("data-def-title"),l.find("a:first span:first").html(o)},this.changeSquarelandTitle=function(e){var i="",t=p.clearNumericInput(p._form.find('input[name="minsquare_land"]')),o=p.clearNumericInput(p._form.find('input[name="maxsquare_land"]')),n=p._form.find(".square_land-block"),a=((0<t||0<o)&&(0<t&&(o||(i+="От: "),i+=t),0<o&&(0<i.length&&(i+=" - "),t||(i+="До: "),i+=o),i+=" "+n.find(".b-radio input[type=radio]:checked").closest("label").find("span").text()),"");n.find(".extendedbox input:checkbox:checked").each(function(){var e=$(this).attr("data-text");""!==a&&(a+=", ",e=e.toLowerCase()),a+=e}),""===i&&""!==a?i+=a:""!==i&&""!==a&&(i+=" "+a),""===i&&(i=n.find('a span[data-ltype="title"]').attr("data-def-title")),n.find("a:first span:first").html(i)},this.changeYieldTitle=function(e){var i=p.clearNumericInput(e),t=$(e).attr("data-title"),o=i;i&&(o=t.replace("NN",i)),$(e).attr("data-value",i),$(e).val(o)},this.selectProperty=function(e){var i=e.attr("name");"parent"==i?100==e.val()?(p.clearAllCheckboxes($('[name="objects[]"]')),p.checkPriceType(),$("#commerce_objects").removeClass("in"),$("#habit_objects").addClass("in")):(16==e.val()?(p.clearAllCheckboxes($('[name="pobjects[]"]')),p.checkPriceType(),$("#commerce_objects").addClass("in")):(p.clearAllCheckboxes($('[name="objects[]"]')),p.clearAllCheckboxes($('[name="pobjects[]"]')),17==e.val()&&(0<$('[name="minsquare"]').val()||0<$('[name="maxsquare"]').val())&&$('[name="square_land_unit"][value="129"]').prop("checked",!0),p.checkPriceType(),$("#commerce_objects").removeClass("in")),$("#habit_objects").removeClass("in")):"pobjects[]"==i?($("#live_type").prop("checked",!0),p.clearAllCheckboxes($('[name="objects[]"]')),p.checkPriceType()):"objects[]"==i&&($("#commerce_type").prop("checked",!0),p.clearAllCheckboxes($('[name="pobjects[]"]')),p.checkPriceType()),p.blockTitleNames(e)},this.selectSale=function(e){var i=p._form.find('input[name="parent"][value="17"]').closest("li"),t=p._form.find(".pricetype-block"),o=p._form.find('[name="type[]"]:checked').val();"1"===o?(p._form.find("#filter_type").removeClass("rent"),p._form.find(".filters").removeClass("wide"),i.show(),t.hide()):"2"===o&&(p._form.find("#filter_type").addClass("rent"),p._form.find(".filters").addClass("wide"),i.hide(),t.show())},this.clearNumericInput=function(e,i){var t="";return void 0!==$(e).attr("inputmode")&&"numeric"==$(e).attr("inputmode")&&(t=(t=$(e).val()).replace(/\s/g,""),t=parseInt(t),!isNaN(t)&&0!==t||(t=""),1!=i&&$(e).val(t)),t},this.inputClickEvent=function(e){var i,t,o=e.attr("data-parent");void 0!==$(e).attr("data-bind")&&(i=p._form.find('[name="'+$(e).attr("data-bind")+'"]'),"checkbox"==$(e).attr("type")&&(e.is(":checked")?($(i).prop("checked",!0),t=$(i).attr("data-parent"),p._form.find("."+t).hasClass("dropdown")&&(p._form.find("."+t).addClass("open"),$(window).width()<=920&&p._form.find("."+t).attr("closable",!1))):$(i).prop("checked",!1)),"text"==$(e).attr("type")&&($(i).val($(e).val()),"yield-f"==$(e).attr("data-bind")&&p.changeYieldTitle(i))),"price-block"===o?p.changePriceTitle(e):"pricetype-block"===o?(p.changePriceTitle(e),p.blockTitleNames(e)):"square_land-block"===o?p.changeSquarelandTitle(e):"yield-single-block"===o?p.changeYieldTitle(e):"land-block"===o?e.is(":checked")?p._form.find(".square_land-block").show():p._form.find(".square_land-block").hide():(p.clearNumericInput(e),p.blockTitleNames(e)),"commercial-block"===o&&"checkbox"==$(e).attr("type")&&e.is(":checked")&&yaReachGoal("commercial_search_crisps"),p.checkEquity(e),p.filterLogic(e),p.checkFilter(e),p.setSearch(),p.getCount(),$(".search-save-form").hide()},this.checkEquity=function(e){"search_currency"===e.attr("name")&&$(".equity-block .double span").html(e.closest("label").find("span").html())},this.saveSearchHashToStorage=function(e){p.cleanEmptyFields();var i=p._form.serializeObject(),e=MD5(JSON.stringify(i)),t=getLocalStorage("search_hash");return(t=t instanceof Array?{}:t)[e]=i,setLocalStorage("search_hash",t),e},this.cleanEmptyFields=function(){p._form.find("input:radio, input:checkbox, input:text, input:hidden").each(function(){-1!==$(this).attr("name").indexOf("-f")?$(this).removeAttr("name"):$(this).is(":checkbox")&&$(this).is(":checked")||($(this).is(":radio")&&$(this).is(":checked")?("search_currency"!=$(this).attr("name")||$("#minprice").val()||$("#maxprice").val()||$(this).removeAttr("name"),"square_land_unit"!=$(this).attr("name")||$('input[name="minsquare_land"]').val()||$('input[name="maxsquare_land"]').val()||$(this).removeAttr("name"),"square_land_unit2"!=$(this).attr("name")||$('input[name="minsquare_land2"]').val()||$('input[name="maxsquare_land2"]').val()||$(this).removeAttr("name")):$(this).is(":text")&&0<$(this).val().length||$(this).is(":hidden")&&0<$(this).val().length&&"0"!==$(this).val()||$(this).removeAttr("name"))})},this.sendForm=function(e){if(2!==e&&"undefined"!==p.canonical_url&&null!==p.canonical_url&&"string"==typeof p.canonical_url&&0<p.canonical_url.length)return"/"!==p.canonical_url[0]&&(p.canonical_url="/"+p.canonical_url),void(p.ismap||3===e?window.location.href=o+"/map"+p.canonical_url:window.location.href=o+p.canonical_url);p.cleanEmptyFields(),3===e?p._form.attr("action",p._form.attr("data-map-action")).submit():(e=p._form.attr("action"),p._form.attr("action",e),p._form.submit())},this.dropdownInit=function(){for(i=0;i<p.all_blocks.length;i++)p.blockTitleNames({attr:function(e){return p.all_blocks[i]}});p.changeSquarelandTitle()},this.checkPriceType=function(){2==$('[name="type[]"]:checked').val()?0<$('[name="pricetype"]:checked').val()||($("#minprice").val()||$("#maxprice").val())&&(16==$('[name="parent"]:checked').val()?$('[name="pricetype"][value="3"]'):$('[name="pricetype"][value="2"]')).prop("checked",!0):$('[name="pricetype"]').prop("checked",!1)},this.checkDetailed=function(){$("#full").val();var e=$('[name="parent"]:checked').length,i=$('[name="objects[]"]:checked').length,t=$('[name="pobjects[]"]:checked').length;1==$("#full").val()?($("#full_link").hide(),$("#short_link").show()):(0<e||0<i||0<t?$("#full_link").show():$("#full_link").hide(),$("#short_link").hide())},this.dropdownMobile=function(){$(window).width()},this.resize=function(){var e=window.innerWidth-document.body.clientWidth,i=!1,e=e<0?document.body.clientWidth:window.innerWidth-e;0<e&&e<767?767<=p.jump_point&&(p.jump_point=e,i=!0):767<=e&&e<920?(p.jump_point<767||920<=p.jump_point)&&(p.jump_point=e,i=!0):920<=e&&e<1220?(p.jump_point<920||1220<=p.jump_point)&&(p.jump_point=e,i=!0):1220<e&&p.jump_point<1220&&(p.jump_point=e,i=!0),i&&(p.init(),$("body").removeClass("body__open-search-mobile"),$(window).scrollTop(p.OffsetScrolTop),$(".form-search-wrap").removeClass("modal-full-search"),$(".dropdown.filters").removeClass("open"),$(".form-search-wrap .nav.nav-pills>li.filters>.dropdown-menu").removeAttr("style"),920<$(window).width()&&$(window).width()<1220&&($(".pr-js-search").hasClass("search-green")&&!$(".pr-js-search").hasClass("map-search")||(rightFixed=$(".form-search-wrap .nav.nav-pills>li.last-child").outerWidth(),$(".form-search-wrap .nav.nav-pills>li.filters>.dropdown-menu").css("right",-rightFixed-8).css("width","870"))),p.checkMobileSelect())},this.init=function(){p.buildBlocks(null),p.selectSale(null),p.dropdownInit(),p.getCount(),p.checkFilter(null),p.setSearch()},this.constructor=function(){var e;$(t).length&&(p._form=$(t),"stripped"===p._form.attr("data-form-type")?p.stripped=!0:"map"===p._form.attr("data-form-type")&&(p.ismap=!0),p._form.find("#searching").length&&(p._searchBtn=p._form.find("#searching")),p._form.find(".auto-search").length&&p.autoComplete(p._form.find(".auto-search")),p._form.on("click","input:checkbox,input:radio",function(){p.inputClickEvent($(this))}),p._form.find("input:text").focusout(function(){p.inputClickEvent($(this))}),p._form.find(".yield-single-block input:text").focus(function(){var e=$(this).attr("data-value");$(this).val(e)}),p._form.find("textarea, input:text").keyup(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),p._form.find("textarea, input:text").keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),p._form.find(".auto-search").keyup(function(){0<$(this).val().length?p._form.find(".autocomplete-clear").removeClass("hidden"):p._form.find(".autocomplete-clear").addClass("hidden"),p.cleanHidden()}),p._form.find("#minprice, #maxprice").keyup(function(){p._form.find(".price-block");p.checkPriceType()}),p._form.on("click",".resetfilter",function(e){e.preventDefault(),$(".search-save-form").hide();var t=p.getExtBlock(2);for(i=0;i<p.all_blocks.length;i++)p.cleanFilterBlock(p.all_blocks[i]);for(i=0;i<t.length;i++)p.cleanFilterBlock(t[i]);p._form.find(".square_land-block").hide(),p.checkFilter(),p.setSearch(),p.getCount()}),p._form.find(".sendsearchform").click(function(e){e.preventDefault();e=2==p._form.find("#type_id").val()?"rent":"buy";put_into_datalayer("interaction","searching","click",e,null,null,null),$(this).hasClass("adsearch2")?yaReachGoal("addSearchPreliminary"):$(this).hasClass("searchfilters")?yaReachGoal("addSearchFilters"):yaReachGoal("addSearch"),$(this).attr("nocanonical")&&1==$(this).attr("nocanonical")||!0===p.stripped?p.sendForm(2):p.getCount(1)}),p._form.find(".favorite-title").click(function(e){e.preventDefault()}),p._form.find(".filters input").on("focus",function(e){$(window).width()<=920&&($("html").animate({scrollTop:$(this).offset().top-$(window).innerHeight()/6},"slow"),window.scrollTo(0,$(this).offset().top-$(window).innerHeight()/6))}),p._form.find(".filters .form-group.dropdown").on("shown.bs.dropdown",function(){$(window).width()<=920&&($("html").animate({scrollTop:$(this).offset().top-$(window).innerHeight()/6},"slow"),window.scrollTo(0,$(this).offset().top-$(window).innerHeight()/6))}),p._form.find('.filters input[name="plot"]').on("click",function(e){$(window).width()<=920&&!0===$(this).is(":checked")&&($("html").animate({scrollTop:$(this).offset().top-$(window).innerHeight()/6},"slow"),window.scrollTo(0,$(this).offset().top-$(window).innerHeight()/6))}),p._form.find(".priceformat").priceFormat({prefix:"",thousandsSeparator:" ",centsSeparator:"",centsLimit:0,clearOnEmpty:!0}),this.OffsetScrolTop=0,p._form.on("click",".search-clear-form",function(e){e.preventDefault(),yaReachGoal("addClearSearch"),$(this).hide(),$(".search-save-form").hide(),$("#full").val(0);var t=p.all_elements;for(i=0;i<p.all_blocks.length;i++)p.cleanFilterBlock(p.all_blocks[i]);for(i=0;i<t.length;i++)p.cleanFilterBlock(t[i]);p._form.find(".square_land-block").hide(),p._form.find(".autocomplete-clear").addClass("hidden"),p._form.find(".auto-search").typeahead("val",""),p.cleanHidden(),p.checkFilter(),p.buildBlocks(null),p.setSearch(),p.getCount(),p._form.find(".filters").removeClass("open")}),0<(stickyBlock=$(".big-search")).length&&!p.ismap&&$(window).scroll(function(){stickyBlockHeight=stickyBlock.outerHeight(!0),"undefined"!=typeof scrollSearchTop&&(scrollSearchTop<=$(window).scrollTop()?($(stickyBlock).addClass("sticky"),$("div").hasClass("search-stick-after")||$('<div class="search-stick-after"></div>').insertAfter(".sticky").css("height",stickyBlockHeight)):($(stickyBlock).removeClass("sticky"),$(".search-stick-after").remove()))}),p._form.find(".dropdown.filters .dropdown-toggle:first").on("click",function(e){$(".form-search-wrap").addClass("modal-full-search"),p.OffsetScrolTop=$(window).scrollTop(),$(window).width()<=920&&($("body").addClass("body__open-search-mobile"),$(window).scrollTop(0),p._form.find(".rent-period").addClass("autoclose")),920<$(window).width()&&$(window).width()<1220&&($(".pr-js-search").hasClass("search-green")&&!$(".pr-js-search").hasClass("map-search")||(rightFixed=$(".form-search-wrap .nav.nav-pills>li.last-child").outerWidth(),$(".form-search-wrap .nav.nav-pills>li.filters>.dropdown-menu").css("right",-rightFixed-8).css("width","870"))),$(this).parent().hasClass("open")||yaReachGoal("addAdvancedSearch")}),p._form.find(".dropdown-menu [data-toggle=dropdown]").on("click",function(e){920<$(window).width()&&(e.preventDefault(),e.stopPropagation(),$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):($(".dropdown-menu [data-toggle=dropdown]").parent().removeClass("open"),$(this).parent().addClass("open")))}),p._form.find(".dropdown-menu .dropdown .title").on("click",function(e){920<$(window).width()&&$(this).parent().removeClass("open")}),p._form.find(".pricetype-block .dropdown-menu").on("click",function(e){920<$(window).width()&&$(e.target).closest(".dropdown-menu .dropdown").is(".open")&&$(".form-group.dropdown").removeClass("open")}),p._form.find(".dropdown.filters .dropdown").on({"shown.bs.dropdown":function(){$(window).width()<=920&&$(this).attr("closable",!1)},"hide.bs.dropdown":function(){if($(window).width()<=920)return"true"===$(this).attr("closable")}}),p._form.find(".dropdown.filters .dropdown-toggle").on({click:function(){$(window).width()<=920&&$(this).closest(".dropdown").attr("closable",!0)}}),$(".pr-js-search").on("click",".modal-full-search__close",function(){$("body").removeClass("body__open-search-mobile"),p._form.find(".rent-period").removeClass("autoclose"),$(window).scrollTop(p.OffsetScrolTop),$(this).parent().removeClass("modal-full-search")}),$(".pr-js-search").on("click",".autocomplete-clear",function(){p._form.find(".autocomplete-clear").addClass("hidden"),p._form.find(".auto-search").typeahead("val",""),p.cleanHidden(),p.getCount(),p.checkFilter(),p._form.find(".search-save-form").hide(),p.setBounds(!1)}),$("body").on("click",".form-search-wrap .nav.nav-pills>li:nth-child(2) .dropdown-toggle",function(){p.OffsetScrolTop=$(window).scrollTop(),$(".form-search-wrap").hasClass("modal-full-search")?$(window).width()<=920&&($(".form-search-wrap .nav.nav-pills>li").css("display","none"),$(".form-search-wrap .nav.nav-pills>li:nth-child(2)>a").css("display","none"),$(".form-search-wrap .nav.nav-pills>li:nth-child(2)").css("display","block"),$(".modal-full-search__close").addClass("hidden")):$(window).width()<=767&&($("body").addClass("body__open-search-mobile"),$(".form-search-wrap .nav.nav-pills>li").css("display","none"),$(".form-search-wrap .nav.nav-pills>li:nth-child(2)").css("display","block"))}),p._form.on("click",".close-dp",function(){$(this).parent().parent().removeClass("open"),$(".form-search-wrap").hasClass("modal-full-search")?($(".form-search-wrap .nav.nav-pills>li").removeAttr("style"),$(".form-search-wrap .nav.nav-pills>li:nth-child(2)>a").removeAttr("style"),$(".form-search-wrap .nav.nav-pills>li:nth-child(2)").removeAttr("style"),$(".modal-full-search__close").removeClass("hidden")):($("body").removeClass("body__open-search-mobile"),$(".form-search-wrap .nav.nav-pills>li").removeAttr("style"),$(window).scrollTop(p.OffsetScrolTop))}),p.init(),e=window.innerWidth-document.body.clientWidth,p.jump_point=window.innerWidth-e,$(window).resize(function(){p.resize()}),(e=p._form.find(".js-form-map-btn")).length&&e.click(function(e){e.preventDefault(),p.getCount(3)}),p.checkMobileSelect(),$(window).width()<=920&&p._form.find(".rent-period").addClass("autoclose")),$(".sortResults").on("shown.bs.dropdown",function(){yaReachGoal("addSorting")}),$("body").on("mousedown",".searchPaging a",function(e){""!==get_mouse_event(e)&&yaReachGoal("addPagination")}),$("body").on("click",".change_sw_view",function(e){return e.preventDefault(),$('form[name="sw_form"] #change_search_view').val($(this).attr("data-sw")),$('form[name="sw_form"]').submit(),!1}),main_page,0<$(".owl-carousel_only-mob").length&&$(window).width()<=1219&&$(".owl-carousel_only-mob").owlCarousel({margin:10,dots:!1,mouseDrag:!0,touchDrag:!0,nav:!0,navElement:"div",responsive:{768:{items:4,mouseDrag:!1},550:{items:3,mouseDrag:!1},360:{items:2,mouseDrag:!1},0:{items:1,mouseDrag:!1}}}),$("body").on("click",".js_send_request_btn",function(e){hash=p.saveSearchHashToStorage();var i=$(this).attr("data-href");$(this).attr("href",i+"#"+hash)}),$(".b-compilation-link .collapse-trigger").on("click",function(e){$(this).parent().parent().toggleClass("open")}),getCookie("prian_site_dir")&&(o=o+"/"+getCookie("prian_site_dir")),0<$("#maphash").length&&0<$("#maphash").val().length&&p.setBounds(!0)}()},searchForm=null;function showCountrySlider(){0<$(".pr-js-country-carousel.owl-carousel:not(.owl-loaded)").length&&$(".pr-js-country-carousel.owl-carousel:not(.owl-loaded)").each(function(){var i=$(this).find(".item").length;"special-edition"==$(this).attr("data-carousel")?$(this).owlCarousel({margin:10,dots:!1,lazyLoad:!0,mouseDrag:!0,touchDrag:!0,nav:!0,navElement:"div",responsive:{0:{items:1,mouseDrag:!1},375:{items:1,mouseDrag:!1},768:{items:4,mouseDrag:!1},921:{items:4,mouseDrag:!1}}}):$(this).owlCarousel({margin:10,dots:!1,lazyLoad:!0,mouseDrag:!0,touchDrag:!0,nav:!0,navElement:"div",onInitialize:function(e){console.log(i)},onInitialized:function(e){console.log(i),console.log(e)},responsive:{0:{items:1<i?1.5:1,nav:!0,loop:!1,autoWidth:!0},767:{items:3<i?3.3:3,nav:!0,loop:!1},921:{items:4}}})})}$().ready(function(){var e,i,t=location.hash.substr(1);t&&(i=(e=$(".headMenu li.request_link a")).attr("href"),e.attr("href",i+"#"+t)),searchForm=new SearchForm("#objectsearchform"),1!=main_page&&2!=main_page&&3!=main_page&&4!=main_page&&main_page});