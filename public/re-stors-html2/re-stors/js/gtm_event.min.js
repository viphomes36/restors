function gtm_error_type(e,t){for(var a="",n=["required","malformed","registered","maxlimit","noexist","nomoney","spam","double","noverify","nosend"],o=0;o<n.length;o++){var r=n[o];if(void 0!==e[r]&&0<e[r]){a=r+t;break}}return a}function get_mouse_event(e){var t="";if(void 0!==e.which)switch(e.which){case 1:t="click";break;case 2:t="clickWheel";break;case 3:t="clickContext"}return t}function put_into_datalayer(e,t,a,n,o,r,c,l){var i;void 0!==e&&void 0!==t&&((i={}).event=e,i.eventCategory=t,null!==a&&(i.eventAction=a),null!==n&&(i.eventLabel=n),null!==o&&(i.referrerType=o),null!==r&&(i.referrerClickPlace=r),"filter"==t&&"object"==typeof c&&(i.filterCountry=c.country,i.filterType=c.type,i.filterText=c.text),null!=l&&(i.eventValue=l),window.dataLayerComplete.then(function(e){"undefined"!=typeof dataLayer&&dataLayer.push(i)}))}function put_custom_event_datalayer(e,t){var a;void 0!==e&&((a=void 0!==t?t:{}).event=e,window.dataLayerComplete.then(function(e){"undefined"!=typeof dataLayer&&dataLayer.push(a)}))}function put_form_datalayer(c,l,i,s,p){void 0!==l&&""!==l?window.dataLayerComplete.then(function(e){var t,a,n={event:"form"},o=(n.eventCategory=l,""!==i&&(n.eventLabel=i),""!==s&&(n.formPlace=s),getCookie("request_form_send")),r=getCookie("request_error_type");3==c&&("undefined"!=typeof dataLayer&&(n.eventAction="open",dataLayer.push(n)),"repeat"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="repeat",n.submitError="none",dataLayer.push(n)),"no"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="error",n.submitError=r,dataLayer.push(n))),1==c&&(r=p,"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="error",n.submitError=r,dataLayer.push(n))),2==c&&("yes"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n),"multiQuestion"==l&&void 0!==$("form#user_save #fobjects").val()&&(t=$("form#user_save #fobjects").val().split(","))&&$.each(t,function(e,t){var a,n,t=$("[data-id='"+t+"'].sendObjectMessageLKContext");void 0!==t&&0<$(t).length&&(a=$(t).attr("data-special"),n={event:"form",eventCategory:"contact"},0<(t=$(t).attr("data-type"))&&(n.eventCategory=2==t?"contactCompany":"contactSeller"),n.eventAction="submit",n.submitResult="success",n.submitError="none",n.eventLabel="free",0<a&&(n.eventLabel=10==a?"selected":"special"),dataLayer.push(n))})),"yesregister"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n),"object"==typeof(a=get_gtm_form_parameters(2,30,0,0))&&void 0!==a.eventCategory&&((n={event:"form"}).eventCategory=a.eventCategory,""!==a.eventLabel&&(n.eventLabel=a.eventLabel),""!==a.formPlace&&(n.formPlace=a.formPlace),n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n))),"yeslogin"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n),"object"==typeof(a=get_gtm_form_parameters(2,1,0,0))&&void 0!==a.eventCategory&&((n={event:"form"}).eventCategory=a.eventCategory,""!==a.eventLabel&&(n.eventLabel=a.eventLabel),""!==a.formPlace&&(n.formPlace=a.formPlace),n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n))),"repeat"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="repeat",n.submitError="none",dataLayer.push(n)),"repeatlogin"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="repeat",n.submitError="none",dataLayer.push(n),"object"==typeof(a=get_gtm_form_parameters(2,1,0,0))&&void 0!==a.eventCategory&&((n={event:"form"}).eventCategory=a.eventCategory,""!==a.eventLabel&&(n.eventLabel=a.eventLabel),""!==a.formPlace&&(n.formPlace=a.formPlace),n.eventAction="submit",n.submitResult="success",n.submitError="none",dataLayer.push(n))),"no"==o&&"undefined"!=typeof dataLayer&&(n.eventAction="submit",n.submitResult="error",n.submitError=r,dataLayer.push(n))),deleteCookie("request_form_send","/"),deleteCookie("request_error_type","/")}):(deleteCookie("request_form_send","/"),deleteCookie("request_error_type","/"))}function get_gtm_form_parameters(e,t,a,n){var o=[];if(0<(t=parseInt(t)))switch(t){case 1:7!=a&&8!=a||2!=e?(r=getCookie("userlogged"),l=getCookie("usertype"),o.eventCategory="login",1==r&&0<l?(1!=l&&2!=l||(o.eventLabel="advertiser"),3==l&&(o.eventLabel="visitor")):o.eventLabel="",o.formPlace=""):(7==a&&(o.eventCategory="subscribe",o.eventLabel=ga_page_cat_type,o.formPlace=0<ga_item_id?"bottom":"top"),8==a&&(o.eventCategory="addFavorite",o.eventLabel=$dialog.find('form input[name="form[object]"]').val(),o.formPlace=0<ga_item_id?"detail":"list"));break;case 1003:o.eventCategory="login",void 0!==$("#user_save #in_account")&&0<$("#user_save #in_account").val()?void 0!==$("#user_save #account_type")&&""!==$("#user_save #account_type").val()&&("company"!=$("#user_save #account_type").val()&&"private"!=$("#user_save #account_type").val()||(o.eventLabel="advertiser"),"visitor"==$("#user_save #account_type").val()&&(o.eventLabel="visitor"),"expert"==$("#user_save #account_type").val()&&(o.eventLabel="expert")):o.eventLabel="expert"==ga_page_cat_type?ga_page_cat_type:"",o.formPlace="";break;case 30:case 3:o.eventCategory="registration",o.eventLabel="visitor",o.formPlace="";break;case 2:o.eventCategory="forgetpass",o.eventLabel="",o.formPlace="";break;case 6:o.eventCategory="registration",o.eventLabel="advertiser",o.formPlace="";break;case 7:o.eventCategory="subscribe",o.eventLabel=ga_page_cat_type,o.formPlace=0<ga_item_id?"detail":"list";break;case 8:o.eventCategory="addFavorite",o.eventLabel=(0<$dialog.find('form input[name="form[object]"]').length?$dialog:$(fcontext[n])).find('form input[name="form[object]"]').val(),o.formPlace=0<ga_item_id?"detail":"list";break;case 13:3==e&&1==a||(o.eventCategory="askConsult",3==e?o.eventLabel="":((r=0)<$dialog.find("form select#country").length?r=$dialog.find("form select#country").val():0<$(fcontext[n]).find("form select#country").length&&(r=$(fcontext[n]).find("form select#country").val()),o.eventLabel="not set",0<r&&(0<$dialog.find('form select#country option[value="'+r+'"]').length?o.eventLabel=$dialog.find('form select#country option[value="'+r+'"]').attr("class"):0<$(fcontext[n]).find('form select#country option[value="'+r+'"]').length&&(o.eventLabel=$(fcontext[n]).find('form select#country option[value="'+r+'"]').attr("class")))),o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"top");break;case 12:o.eventCategory="request",o.eventLabel="request",o.formPlace="top";break;case 122:o.eventCategory="request",o.eventLabel="requestNew",o.formPlace="top";break;case 121:o.eventCategory="request",o.eventLabel="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"other",o.formPlace="top",0<$(fcontext[n]).find('form [name="form[page_type]"]').length&&("request_left"==(l=$(fcontext[n]).find('form [name="form[page_type]"]').val())&&(o.formPlace="left"),"request_center"!=l&&"request_center_short"!=l||(o.formPlace="center"));break;case 152:case 150:case 15:var r=void 0!==(c=$(fcontext[n]).attr("class"))&&""!==c?c.match(/gtm_[a-z]+/i):"";"company"==ga_page_cat_type?(o.eventCategory="contact",o.eventLabel=(void 0!==$(fcontext[n]).find(".pr-js-company-info")&&0<$(fcontext[n]).find(".pr-js-company-info").length?$(fcontext[n]).find(".pr-js-company-info"):$("h1")).html(),o.formPlace=void 0!==r&&null!=r?r[0].replace("gtm_",""):"undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"bottom"):"immigration"==ga_page_cat_type?(o.eventCategory="contactImmigration",o.eventLabel=(void 0!==$(fcontext[n]).find(".pr-js-company-info")&&0<$(fcontext[n]).find(".pr-js-company-info").length?$(fcontext[n]).find(".pr-js-company-info"):$("h1")).html(),o.formPlace=void 0!==r&&null!=r?r[0].replace("gtm_",""):"undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"bottom"):"pub"==ga_page_cat_type||"news"==ga_page_cat_type||"video"==ga_page_cat_type?(o.eventCategory="contact",o.formPlace="article"):"detail"==ga_page_cat_type?(0<$dialog.find('form input[name="form[price_type]"]').val()?o.eventCategory=2==$('form input[name="form[price_type]"]').val()?"contactCompany":"contactSeller":0<$(fcontext[n]).find('form input[name="form[price_type]"]').val()?o.eventCategory=2==$(fcontext[n]).find('form input[name="form[price_type]"]').val()?"contactCompany":"contactSeller":0<$(".openMessagePage").length?o.eventCategory=2==$("#fpricetype").val()?"contactCompany":"contactSeller":o.eventCategory="contact",o.eventLabel=ga_item_type,$(fcontext[n]).find('input[name="form[type_place]"]').length?(l=$(fcontext[n]).find('input[name="form[type_place]"]').val(),o.formPlace=void 0!==l?l.replace("gtm_",""):"top"):o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"top"):0<$(".openMessagePage").length?(o.eventCategory=2==$("#fpricetype").val()?"contactCompany":"contactSeller",o.eventLabel=0<$("#fspecial").val()?10==$("#fspecial").val()?"selected":"special":"detail",o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"top"):void 0!==$("#user_save #in_account")&&0<$("#user_save #in_account").val()?0<$(fcontext[n]).find('form input[name="form[object]"]').val()?($(fcontext[n]).find('form input[name="form[object]"]').val(),o.eventCategory="contact",o.eventLabel="free",0<(r=$(fcontext[n]).find('form input[name="form[special_type]"]').val())&&(o.eventLabel=10==r?"selected":"special"),0<(l=$(fcontext[n]).find('form input[name="form[price_type]"]').val())&&(o.eventCategory=2==l?"contactCompany":"contactSeller"),o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"top"):$(fcontext[n]).find('form input[name="form[objects]"]').val()&&(o.eventCategory="multiQuestion",r=$(fcontext[n]).find('form input[name="form[objects]"]').val().split(","),o.eventLabel=r.length,o.formPlace="top"):o.eventCategory="otherContact";break;case 9:case 90:o.eventCategory="newOfferAlert",void 0!==$("#user_save #in_account")&&0<$("#user_save #in_account").val()?void 0!==$("#user_save #account_type")&&""!==$("#user_save #account_type").val()&&("company"!=$("#user_save #account_type").val()&&"private"!=$("#user_save #account_type").val()||(o.eventLabel="accountAdvertiser"),"visitor"==$("#user_save #account_type").val()&&(o.eventLabel="accountVisitor")):(void 0!==$("#user_save #fsearchfound")&&0==$("#user_save #fsearchfound").val()&&(o.eventLabel="noResults"),void 0!==$("#user_save #fsearchlast")&&0<$("#user_save #fsearchlast").val()&&(o.eventLabel=1==$("#user_save #fsearchlast").val()?"lastPage":"bigPage")),o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"";break;case 40:o.eventCategory="requestAdv",o.eventLabel="",o.formPlace="";break;case 41:var c,l="undefined"!=typeof ga_item_type?ga_item_type:"";o.eventCategory="special_edition_"+l,$(fcontext[n]).attr("class")&&(c=$(fcontext[n]).attr("class"),gtm_type_place=c.match(/gtm_[a-z]+/i)),o.eventLabel="undefined"!=typeof gtm_type_place&&null!==gtm_type_place?gtm_type_place[0].replace("gtm_",""):"";break;case 37:o.eventCategory="sendToEmail",o.eventLabel="undefined"!=typeof ga_item_type&&null!=gtm_type_place?ga_item_type:"",o.formPlace="detail";break;case 1023:case 51:o.eventCategory="workshop",o.eventLabel=$(".wtitle").text(),o.formPlace="undefined"!=typeof gtm_type_place&&null!=gtm_type_place?gtm_type_place[0].replace("gtm_",""):"top";break;case 1301:o.eventCategory="buySelect",o.eventLabel="",o.formPlace="";break;case 1302:o.eventCategory="buyRequest",o.eventLabel="",o.formPlace="";break;case 43:var i=$("#farticle").val();o.eventCategory="request"+i,o.eventLabel="",o.formPlace="";break;case 44:i=$("#farticle").val();o.eventCategory="calculator"+i,o.eventLabel="",o.formPlace="";break;default:o.eventCategory="",o.eventLabel="",o.formPlace=""}return o}function update_gtm_place(e){e=void 0!==e&&null!=e?e[0]:"";$("#user_save #type_place").length?$("#user_save #type_place").val(e):$("#user_save").append('<input type="hidden" id="type_place" name="type_place" value="'+e+'"></input>')}$(document).ready(function(){window.dataLayerComplete=$.Deferred(),window.dataLayerComplete.done(function(e){return!0}),window.dataLayerComplete.resolve("gtm deferred resolve")});